-- WARNING: This schema is for context only and is not meant to be run.
-- Table order and constraints may not be valid for execution.

CREATE TABLE public.admin_logs (
  id integer NOT NULL DEFAULT nextval('admin_logs_id_seq'::regclass),
  admin_id integer NOT NULL,
  action character varying NOT NULL,
  target_table character varying NOT NULL,
  target_id integer,
  details text,
  timestamp timestamp without time zone,
  CONSTRAINT admin_logs_pkey PRIMARY KEY (id),
  CONSTRAINT admin_logs_admin_id_fkey FOREIGN KEY (admin_id) REFERENCES public.users(id)
);
CREATE TABLE public.downloads (
  id integer NOT NULL DEFAULT nextval('downloads_id_seq'::regclass),
  title character varying NOT NULL,
  description text,
  category character varying NOT NULL,
  image_url character varying,
  download_url character varying,
  file_size character varying,
  version character varying,
  is_free boolean,
  price double precision,
  download_count integer,
  is_active boolean,
  is_featured boolean,
  tags text,
  requirements text,
  created_at timestamp without time zone,
  updated_at timestamp without time zone,
  CONSTRAINT downloads_pkey PRIMARY KEY (id)
);
CREATE TABLE public.game_products (
  id integer NOT NULL DEFAULT nextval('game_products_id_seq'::regclass),
  game_id integer NOT NULL,
  title character varying NOT NULL,
  description text,
  price double precision NOT NULL,
  is_free boolean,
  download_url character varying,
  version character varying,
  features text,
  is_active boolean,
  is_featured boolean,
  created_at timestamp without time zone,
  updated_at timestamp without time zone,
  CONSTRAINT game_products_pkey PRIMARY KEY (id),
  CONSTRAINT game_products_game_id_fkey FOREIGN KEY (game_id) REFERENCES public.games(id)
);
CREATE TABLE public.games (
  id integer NOT NULL DEFAULT nextval('games_id_seq'::regclass),
  name character varying NOT NULL,
  description text,
  category character varying NOT NULL,
  image_url character varying,
  is_active boolean,
  is_featured boolean,
  tags text,
  created_at timestamp without time zone,
  updated_at timestamp without time zone,
  CONSTRAINT games_pkey PRIMARY KEY (id)
);
CREATE TABLE public.pages (
  id integer NOT NULL DEFAULT nextval('pages_id_seq'::regclass),
  title character varying NOT NULL,
  slug character varying NOT NULL UNIQUE,
  content text,
  button_text character varying,
  button_url character varying,
  is_active boolean,
  order integer,
  created_at timestamp without time zone,
  updated_at timestamp without time zone,
  CONSTRAINT pages_pkey PRIMARY KEY (id)
);
CREATE TABLE public.password_reset_tokens (
  id integer NOT NULL DEFAULT nextval('password_reset_tokens_id_seq'::regclass),
  user_id integer NOT NULL,
  token character varying NOT NULL,
  expires_at timestamp without time zone NOT NULL,
  used boolean,
  created_at timestamp without time zone,
  CONSTRAINT password_reset_tokens_pkey PRIMARY KEY (id),
  CONSTRAINT password_reset_tokens_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id)
);
CREATE TABLE public.payments (
  id integer NOT NULL DEFAULT nextval('payments_id_seq'::regclass),
  user_id integer NOT NULL,
  product_id integer,
  valor double precision NOT NULL,
  data_pagamento timestamp without time zone,
  status character varying,
  plano character varying,
  gateway_id character varying,
  CONSTRAINT payments_pkey PRIMARY KEY (id),
  CONSTRAINT payments_product_id_fkey FOREIGN KEY (product_id) REFERENCES public.products(id),
  CONSTRAINT payments_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id)
);
CREATE TABLE public.products (
  id integer NOT NULL DEFAULT nextval('products_id_seq'::regclass),
  name character varying NOT NULL,
  description text,
  price double precision NOT NULL,
  duration_days integer NOT NULL,
  image_url character varying,
  is_active boolean,
  is_featured boolean,
  features text,
  created_at timestamp without time zone,
  updated_at timestamp without time zone,
  CONSTRAINT products_pkey PRIMARY KEY (id)
);
CREATE TABLE public.site_settings (
  id integer NOT NULL DEFAULT nextval('site_settings_id_seq'::regclass),
  key character varying NOT NULL UNIQUE,
  value text,
  category character varying NOT NULL,
  created_at timestamp without time zone,
  updated_at timestamp without time zone,
  CONSTRAINT site_settings_pkey PRIMARY KEY (id)
);
CREATE TABLE public.subpages (
  id integer NOT NULL DEFAULT nextval('subpages_id_seq'::regclass),
  parent_id integer NOT NULL,
  title character varying NOT NULL,
  slug character varying NOT NULL,
  content text,
  button_text character varying,
  button_url character varying,
  is_active boolean,
  order integer,
  created_at timestamp without time zone,
  updated_at timestamp without time zone,
  CONSTRAINT subpages_pkey PRIMARY KEY (id),
  CONSTRAINT subpages_parent_id_fkey FOREIGN KEY (parent_id) REFERENCES public.pages(id)
);
CREATE TABLE public.users (
  id integer NOT NULL DEFAULT nextval('users_id_seq'::regclass),
  email character varying NOT NULL,
  senha_hash character varying NOT NULL,
  data_expiracao timestamp without time zone,
  is_admin boolean,
  created_at timestamp without time zone,
  updated_at timestamp without time zone,
  hwid text,
  status_licenca character varying DEFAULT 'pendente'::character varying,
  tentativas_login integer DEFAULT 0,
  ultimo_login timestamp without time zone,
  ip_registro character varying,
  ip_ultimo_login character varying,
  CONSTRAINT users_pkey PRIMARY KEY (id)
);